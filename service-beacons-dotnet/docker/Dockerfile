FROM mcr.microsoft.com/dotnet/core/runtime:3.1

# Set working directory
WORKDIR /app

# Copy compiled binaries
COPY ./obj ./bin

# Copy configuration
COPY config/*.* ./config/

#ENV MONGO_ENABLED true
ENV MONGO_SERVICE_URI ""
ENV MONGO_SERVICE_HOST mongo
ENV MONGO_SERVICE_PORT 27017
ENV MONGO_DB app
ENV MONGO_USER ""
ENV MONGO_PASS ""
#ENV POSTGRES_ENABLED true
ENV POSTGRES_SERVICE_URI ""
ENV POSTGRES_SERVICE_HOST postgres
ENV POSTGRES_SERVICE_PORT 5432
ENV POSTGRES_DB app
ENV POSTGRES_USER postgres
ENV POSTGRES_PASS postgres
#ENV SQLSERVER_ENABLED true
ENV SQLSERVER_SERVICE_URI ""
ENV SQLSERVER_SERVICE_HOST sqlserver
ENV SQLSERVER_SERVICE_PORT 1433
ENV SQLSERVER_DB master
ENV SQLSERVER_USER sa
ENV SQLSERVER_PASS sqlserver_123
#ENV HTTP_ENABLED true
ENV HTTP_PORT 8080
#ENV GRPC_ENABLED true
ENV GRPC_PORT 8090

EXPOSE 8080
EXPOSE 8090

CMD ["dotnet", "./bin/main.dll", "-c", "./config/config.yml"]